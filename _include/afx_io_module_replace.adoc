= Etapa 1: Encerre o nó prejudicado
:allow-uri-read: 


Você pode usar esse procedimento com todas as versões do ONTAP compatíveis com seu sistema de storage.

.Antes de começar
* Tem de ter a peça de substituição disponível.
* Certifique-se de que todos os outros componentes do sistema de armazenamento estão a funcionar corretamente; caso contrário, contacte o suporte técnico.




== Etapa 1: Encerre o nó prejudicado

Desligue ou assuma o controlador desativado.

Para desligar o controlador com defeito, você deve determinar o status do controlador e, se necessário, executar uma aquisição de failover de armazenamento do controlador para que o controlador íntegro continue a fornecer dados do armazenamento do controlador com defeito.

.Sobre esta tarefa
* Se você tiver um cluster com mais de quatro nós, ele deverá estar no quorum.  Para visualizar informações de cluster sobre seus nós, use o `cluster show` comando.  Para mais informações sobre o `cluster show` comando, vejalink:https://docs.netapp.com/us-en/ontap/system-admin/display-nodes-cluster-task.html["Exibir detalhes no nível do nó em um cluster ONTAP"^] .
* Se o cluster não estiver em quorum ou se a integridade ou elegibilidade de qualquer controlador (exceto o controlador com defeito) for mostrada como falsa, você deverá corrigir o problema antes de desligar o controlador com defeito. Ver link:https://docs.netapp.com/us-en/ontap/system-admin/synchronize-node-cluster-task.html?q=Quorum["Sincronize um nó com o cluster"^] .


.Passos
. Se o AutoSupport estiver ativado, suprimir a criação automática de casos invocando uma mensagem AutoSupport:
+
`system node autosupport invoke -node * -type all -message MAINT=<# of hours>h`

+
A seguinte mensagem AutoSupport suprime a criação automática de casos por duas horas:

+
`cluster1:> system node autosupport invoke -node * -type all -message MAINT=2h`

. Desabilitar o retorno automático do console do controlador prejudicado:
+
`storage failover modify -node impaired-node -auto-giveback-of false`

+

NOTE: Quando você vir _Deseja desabilitar o retorno automático?_, digite `y` .

+
.. Se você estiver executando o ONTAP versão 9.17.1 e o controlador com problemas não puder ser ativado ou já tiver sido assumido, será necessário desativar o link de interconexão HA do controlador íntegro antes de inicializar o controlador com problemas.  Isso impede que o controlador prejudicado execute o retorno automático.
+
`system ha interconnect link off -node healthy-node -link 0`

+
`system ha interconnect link off -node healthy-node -link 1`



. Leve o controlador prejudicado para o prompt Loader:
+
[cols="1,2"]
|===
| Se o controlador afetado estiver a apresentar... | Então... 


 a| 
O prompt Loader
 a| 
Vá para a próxima etapa.



 a| 
Prompt do sistema ou prompt de senha
 a| 
Assuma ou interrompa o controlador prejudicado do controlador saudável:
`storage failover takeover -ofnode _impaired_node_name_ -halt _true_`

O parâmetro _-halt true_ leva o nó prejudicado ao prompt do LOADER.

|===




== Passo 2: Substitua um módulo de e/S com falha

Para substituir um módulo de e/S, localize-o dentro do gabinete e siga a sequência específica de etapas.

. Se você ainda não está aterrado, aterre-se adequadamente.
. Desconete qualquer cabeamento do módulo de e/S de destino.
+

NOTE: Certifique-se de etiquetar onde os cabos foram conectados para que você possa conectá-los às portas corretas ao reinstalar o módulo.

. Gire a bandeja de gerenciamento de cabos para baixo puxando os botões de ambos os lados no interior da bandeja de gerenciamento de cabos e, em seguida, gire a bandeja para baixo.
+

NOTE: Esta ilustração a seguir mostra a remoção de um módulo de e/S horizontal e vertical. Normalmente, você só removerá um módulo de e/S.

+
image:../media/drw_a1k_io_remove_replace_ieops-1382.svg["Remova o módulo de e/S."]

+
[cols="1,4"]
|===


 a| 
image:../media/icon_round_1.png["Legenda número 1"]
 a| 
Trinco do came de e/S.

|===
+
Certifique-se de etiquetar os cabos para que saiba de onde vieram.

. Remova o módulo de e/S de destino do compartimento:
+
.. Prima o botão do came no módulo alvo.
.. Rode o trinco do excêntrico para longe do módulo o mais longe possível.
.. Remova o módulo do compartimento prendendo o dedo na abertura da alavanca do came e puxando o módulo para fora do compartimento.
+
Certifique-se de manter o controle de qual slot o módulo de e/S estava.



. Coloque o módulo de e/S de lado.
. Instale o módulo de e/S de substituição no compartimento:
+
.. Alinhe o módulo com as extremidades da abertura da ranhura do compartimento.
.. Deslize cuidadosamente o módulo para dentro da ranhura até ao compartimento e, em seguida, rode o trinco da came até ao fim para bloquear o módulo no lugar.


. Reconecte os cabos do módulo de E/S.
. Rode o tabuleiro de gestão de cabos para cima até à posição fechada.




== Passo 3: Reinicie o controlador

Depois de substituir um módulo de e/S, tem de reiniciar o controlador.

. Reinicie o controlador a partir do prompt Loader:
+
`bye`

+

NOTE: Reiniciar o controlador prejudicado também reinicializa os módulos de e/S e outros componentes.

. Pressione <enter> quando as mensagens do console pararem.
+
** Se você vir o prompt _login_, vá para a próxima etapa.
** Se você não vir o prompt de login, faça login no nó do parceiro.


. Devolva apenas a raiz com a opção override-destination-checks:
+
`storage failover giveback -ofnode impaired-node -only-root true -override -destination-checks true`

+

NOTE: O comando a seguir só está disponível no nível de privilégio Modo de diagnóstico.  Para obter mais informações sobre níveis de privilégio, consultelink:https://docs.netapp.com/us-en/ontap/system-admin/administrative-privilege-levels-concept.html["Entenda os níveis de privilégio para comandos ONTAP CLI"^] .

+
Se encontrar erros, https://support.netapp.com["Suporte à NetApp"] contacte .

. Aguarde 5 minutos após a conclusão do relatório de giveback e verifique o status de failover e o status de giveback:
+
`storage failover show`e `storage failover show-giveback`

+

NOTE: O comando a seguir só está disponível no nível de privilégio Modo de diagnóstico.

. Se os links de interconexão HA foram desativados, reative-os:
+
`system ha interconnect link on -node healthy-node -link 0`

+
`system ha interconnect link on -node healthy-node -link 1`

. Se a giveback automática foi desativada, reative-a:
+
`storage failover modify -ofnode impaired-node -automatic-giveback true`

. Volte a colocar o controlador afetado em funcionamento normal, devolvendo o respetivo armazenamento:
+
`storage failover giveback -ofnode _impaired_node_name_`

. Restaure a giveback automática a partir da consola do controlador saudável:
+
`storage failover modify -node local -auto-giveback-of true`

. Se o AutoSupport estiver ativado, restaurar/anular a criação automática de casos:
+
`system node autosupport invoke -node * -type all -message MAINT=END`





== Passo 4: Devolva a peça com falha ao NetApp

Devolva a peça com falha ao NetApp, conforme descrito nas instruções de RMA fornecidas com o kit. Consulte a https://mysupport.netapp.com/site/info/rma["Devolução de peças e substituições"] página para obter mais informações.

---
permalink: a1k/nvdimm-battery-replace.html 
sidebar: sidebar 
keywords: aff a1k, replace the nv battery, NV battery 
summary: Para substituir a bateria NV, tem de remover o módulo do controlador, remover a bateria, substituir a bateria e, em seguida, reinstalar o módulo do controlador. 
---
= Substitua a bateria NV - AFF A1K
:allow-uri-read: 
:icons: font
:imagesdir: ../media/


[role="lead"]
Para substituir a bateria NV, tem de remover o módulo do controlador, remover a bateria, substituir a bateria e, em seguida, reinstalar o módulo do controlador.

Todos os outros componentes do sistema devem estar funcionando corretamente; caso contrário, você deve entrar em Contato com o suporte técnico.



== Passo 1: Desligue o controlador desativado

Encerre ou assuma o controlador afetado utilizando uma das seguintes opções.

[role="tabbed-block"]
====
.Opção 1: A maioria dos sistemas
--
Para encerrar o controlador com deficiência, você deve determinar o status do controlador e, se necessário, assumir o controlador para que o controlador saudável continue fornecendo dados do armazenamento do controlador com deficiência.

.Sobre esta tarefa
* Se você tiver um sistema SAN, você deve ter verificado mensagens de  `cluster kernel-service show`evento ) para o blade SCSI do controlador afetado. O `cluster kernel-service show` comando (do modo avançado priv) exibe o nome do nó, link:https://docs.netapp.com/us-en/ontap/system-admin/display-nodes-cluster-task.html["status do quorum"]desse nó, o status de disponibilidade desse nó e o status operacional desse nó.
+
Cada processo SCSI-blade deve estar em quórum com os outros nós no cluster. Qualquer problema deve ser resolvido antes de prosseguir com a substituição.

* Se você tiver um cluster com mais de dois nós, ele deverá estar no quórum. Se o cluster não estiver em quórum ou se um controlador íntegro exibir false para qualificação e integridade, você deverá corrigir o problema antes de encerrar o controlador prejudicado; link:https://docs.netapp.com/us-en/ontap/system-admin/synchronize-node-cluster-task.html?q=Quorum["Sincronize um nó com o cluster"^]consulte .


.Passos
. Se o AutoSupport estiver ativado, suprimir a criação automática de casos invocando uma mensagem AutoSupport: `system node autosupport invoke -node * -type all -message MAINT=<# of hours>h`
+
A seguinte mensagem AutoSupport suprime a criação automática de casos por duas horas: `cluster1:> system node autosupport invoke -node * -type all -message MAINT=2h`

. Desative a giveback automática a partir da consola do controlador saudável: `storage failover modify –node local -auto-giveback false`
+

NOTE: Quando vir _do pretende desativar a auto-giveback?_, introduza `y`.

. Leve o controlador prejudicado para o prompt Loader:
+
[cols="1,2"]
|===
| Se o controlador afetado estiver a apresentar... | Então... 


 a| 
O prompt Loader
 a| 
Vá para a próxima etapa.



 a| 
A aguardar pela giveback...
 a| 
Pressione Ctrl-C e responda `y` quando solicitado.



 a| 
Prompt do sistema ou prompt de senha
 a| 
Assuma ou interrompa o controlador prejudicado do controlador saudável: `storage failover takeover -ofnode _impaired_node_name_`

Quando o controlador prejudicado mostrar aguardando a giveback..., pressione Ctrl-C e responda `y`.

|===


--
.Opção 2: O controlador está em um MetroCluster
--
Para encerrar o controlador com deficiência, você deve determinar o status do controlador e, se necessário, assumir o controlador para que o controlador saudável continue fornecendo dados do armazenamento do controlador com deficiência.

* Se você tiver um cluster com mais de dois nós, ele deverá estar no quórum. Se o cluster não estiver em quórum ou se um controlador íntegro exibir false para qualificação e integridade, você deverá corrigir o problema antes de encerrar o controlador prejudicado; link:https://docs.netapp.com/us-en/ontap/system-admin/synchronize-node-cluster-task.html?q=Quorum["Sincronize um nó com o cluster"^]consulte .
* Você deve ter confirmado que o estado de configuração do MetroCluster está configurado e que os nós estão em um estado ativado e normal (`metrocluster node show`).


.Passos
. Se o AutoSupport estiver ativado, suprimir a criação automática de casos invocando uma mensagem AutoSupport: `system node autosupport invoke -node * -type all -message MAINT=number_of_hours_downh`
+
A seguinte mensagem AutoSupport suprime a criação automática de casos por duas horas: `cluster1:*> system node autosupport invoke -node * -type all -message MAINT=2h`

. Desative a giveback automática a partir da consola do controlador saudável: `storage failover modify –node local -auto-giveback false`
. Leve o controlador prejudicado para o prompt Loader:
+
[cols="1,2"]
|===
| Se o controlador afetado estiver a apresentar... | Então... 


 a| 
O prompt Loader
 a| 
Vá para a próxima seção.



 a| 
A aguardar pela giveback...
 a| 
Pressione Ctrl-C e responda `y` quando solicitado.



 a| 
Prompt do sistema ou prompt de senha (digite a senha do sistema)
 a| 
Assuma ou interrompa o controlador prejudicado do controlador saudável: `storage failover takeover -ofnode _impaired_node_name_`

Quando o controlador prejudicado mostrar aguardando a giveback..., pressione Ctrl-C e responda `y`.

|===


--
====


== Passo 2: Remova o módulo do controlador

Você deve remover o módulo do controlador do gabinete quando substituir o módulo do controlador ou substituir um componente dentro do módulo do controlador.

. Verifique o LED de status do NVRAM localizado no slot 4/5 do sistema. Há também um LED NVRAM no painel frontal do módulo do controlador. Procure o ícone NV:
+
image::../media/drw_a1K-70-90_nvram-led_ieops-1463.svg[Gráfico de localização do LED de estado e atenção do NVRAM]

+
[cols="1,4"]
|===


 a| 
image:../media/icon_round_1.png["Legenda número 1"]
 a| 
LED de estado do NVRAM



 a| 
image:../media/icon_round_2.png["Legenda número 2"]
 a| 
LED de atenção NVRAM

|===
+

NOTE: Se o LED de status do NVRAM estiver piscando, isso pode significar que o módulo do controlador não foi tomado ou interrompido corretamente (dados não comprometidos). Se o módulo do controlador afetado não tiver sido tomado com sucesso pelo módulo do controlador parceiro, contacte https://mysupport.netapp.com/site/global/dashboard["Suporte à NetApp"] antes de continuar com este procedimento.

+
O comportamento geral do LED de estado do NVRAM no módulo do controlador desativado é o seguinte:

+
** O LED de estado do NVRAM pisca quando a alimentação é removida do módulo do controlador e o módulo do controlador está no estado "aguardando a giveback" ou o módulo do controlador não é tomado ou interrompido corretamente (dados não confirmados).
** O LED de estado do NVRAM pisca quando o módulo do controlador é removido do compartimento e pode significar que o módulo do controlador não é tomado ou interrompido corretamente (dados não confirmados). Confirme se o módulo do controlador foi corretamente adquirido pelo módulo do controlador parceiro ou se o módulo do controlador afetado mostra `waiting for giveback`. Em seguida, o LED piscando pode ser ignorado (e o controlador pode ser removido do gabinete).


. Se você ainda não está aterrado, aterre-se adequadamente.
. Na parte da frente da unidade, prenda os dedos nos orifícios dos cames de bloqueio, aperte as patilhas nas alavancas do excêntrico e, com cuidado, mas rode firmemente ambas as travas na sua direção ao mesmo tempo.
+
O módulo do controlador move-se ligeiramente para fora do compartimento.

+
image::../media/drw_a1k_pcm_remove_replace_ieops-1375.svg[Controlador remover gráfico]

+
[cols="1,4"]
|===


 a| 
image:../media/icon_round_1.png["Legenda número 1"]
| Travas do came de travamento 
|===
. Deslize o módulo do controlador para fora do compartimento e coloque-o em uma superfície plana e estável.
+
Certifique-se de que suporta a parte inferior do módulo do controlador enquanto o desliza para fora do compartimento.





== Passo 3: Substitua a bateria NV

Retire a bateria NV avariada do módulo do controlador e instale a bateria NV de substituição.

. Abra a tampa da conduta de ar e localize a bateria NV.
+
image::../media/drw_a1k_remove_replace_nvmembat_ieops-1379.svg[RelPACE a bateria NV]

+
[cols="1,4"]
|===


| image:../media/icon_round_1.png["Legenda número 1"]  a| 
Tampa da conduta de ar da bateria NV



 a| 
image:../media/icon_round_2.png["Legenda número 2"]
| Ficha da bateria NV 
|===
. Levante a bateria para aceder à ficha da bateria.
. Aperte o clipe na face da ficha da bateria para soltar a ficha da tomada e, em seguida, desligue o cabo da bateria da tomada.
. Levante a bateria para fora da conduta de ar e do módulo do controlador e, em seguida, coloque-a de lado.
. Retire a bateria de substituição da respetiva embalagem.
. Instale a bateria de substituição no controlador:
+
.. Ligue a ficha da bateria à tomada riser e certifique-se de que a ficha fica fixa no lugar.
.. Insira a bateria na ranhura e pressione firmemente a bateria para baixo para se certificar de que está bloqueada no lugar.


. Feche a tampa da conduta de ar NV.
+
Certifique-se de que a ficha se encaixa na tomada.





== Etapa 4: Reinstale o módulo do controlador

Reinstale o módulo do controlador e inicialize-o.

. Se ainda não o tiver feito, feche a conduta de ar.
. Alinhe a extremidade do módulo do controlador com a abertura no compartimento e deslize o módulo do controlador para dentro do chassi com as alavancas giradas para longe da frente do sistema.
. Assim que o módulo do controlador o impedir de deslizar para mais longe, rode as pegas do excêntrico para dentro até que fiquem presas por baixo das ventoinhas
+

NOTE: Não use força excessiva ao deslizar o módulo do controlador para dentro do compartimento para evitar danificar os conetores.

+
O módulo do controlador começa a inicializar assim que estiver totalmente encaixado no compartimento.

. Restaure o giveback automático se você o desativou usando o `storage failover modify -node local -auto-giveback true` comando.
. Se o AutoSupport estiver ativado, restaure/dessuprimir a criação automática de casos usando o `system node autosupport invoke -node * -type all -message MAINT=END` comando.




== Passo 5: Devolva a peça com falha ao NetApp

Devolva a peça com falha ao NetApp, conforme descrito nas instruções de RMA fornecidas com o kit. Consulte a https://mysupport.netapp.com/site/info/rma["Devolução de peças e substituições"] página para obter mais informações.
